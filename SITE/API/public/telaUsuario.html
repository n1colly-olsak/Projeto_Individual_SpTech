<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <link rel="stylesheet" href="css/telaUsuario.css" />
</head>

<body onload="esconderDivs()">
    <header>
        <div class="navegacao">
            <div class="olaUser">
                <span>Olá, user</span>
            </div>

            <ul class="navbar">
                <li><a href="index.html">Início</a></li>
                <li><a href="dashboard.html">Acessar dashboard</a></li>
            </ul>
        </div>
    </header>

    <main>
        <section class="sobreQuiz" id="sobreQuiz">
            <h2>Sobre esse quiz</h2>
            <p>Após navegar pelo site, está na hora de testar seus conhecimentos sobre a ginástica rítmica.</p>
            <p>Responda às 8 perguntas do quiz e depois visualize seus dados na dashboard.</p>
            <p>Na dashboard, você pode acompanhar a sua evolução no tema.</p>
            <button onclick="IniciarQuiz()">Iniciar Quiz</button>
        </section>

        <section class="pergunta1" id="pergunta1">
            <h2>1. A ginástica rítmica combina movimentos corporais com elementos de qual área artística?</h2>
            <form> <!--formulario, -->
                <input type="radio" value="1" id="p1a" name="pergunta1">
                <label for="p1a">Escultura</label> <br>

                <input type="radio" value="2" id="p1b" name="pergunta1">
                <label for="p1b">Teatro e ballet</label> <br>

                <input type="radio" value="3" id="p1c" name="pergunta1">
                <label for="p1c">Pintura</label> <br>

                <input type="radio" value="4" id="p1d" name="pergunta1">
                <label for="p1d">Poesia</label> <br>
            </form>
            <button onlick="proximaPergunta">Próxima</button>
        </section>

        <section class="pergunta2" id="pergunta2">
            <h2>2: Qual desses itens NÃO é um aparelho utilizado na ginástica rítmica?</h2>
            <form>
                <input type="radio" value="5" id="p2a" name="pergunta2">
                <label for="p2a">Corda</label> <br>

                <input type="radio" value="6" id="p2b" name="pergunta2">
                <label for="p2b">Arco</label> <br>

                <input type="radio" value="7" id="p2c" name="pergunta2">
                <label for="p2c">Trave</label> <br>

                <input type="radio" value="8" id="p2d" name="pergunta2">
                <label for="p2d">Fita</label> <br>
            </form>
        </section>

        <section class="pergunta3" id="pergunta3">
            <h2>3: Quando a ginástica rítmica passou a ser modalidade competitiva nos Jogos Olímpicos?</h2>
            <form>
                <input type="radio" value="9" id="p3a" name="pergunta3">
                <label for="p3a">1942</label> <br>

                <input type="radio" value="10" id="p3b" name="pergunta3">
                <label for="p3b">1980</label> <br>

                <input type="radio" value="11" id="p3c" name="pergunta3">
                <label for="p3c">1984</label> <br>

                <input type="radio" value="12" id="p3d" name="pergunta3">
                <label for="p3d">1996</label> <br>
            </form>
        </section>

        <section class="pergunta4" id="pergunta4">
            <h2>4: Em que país ocorreu o primeiro campeonato nacional de ginástica rítmica, em 1942?</h2>
            <form>
                <input type="radio" value="13" id="p4a" name="pergunta4">
                <label for="p4a">União Soviética</label> <br>

                <input type="radio" value="14" id="p4b" name="pergunta4">
                <label for="p4b">Canadá</label> <br>

                <input type="radio" value="15" id="p4c" name="pergunta4">
                <label for="p4c">Alemanha</label> <br>

                <input type="radio" value="16" id="p4d" name="pergunta4">
                <label for="p4d">Japão</label> <br>
            </form>
        </section>

        <section class="pergunta5" id="pergunta5">
            <h2>5: Qual foi a primeira campeã mundial da ginástica rítmica, em 1963?</h2>
            <form>
                <input type="radio" value="17" id="p5a" name="pergunta5">
                <label for="p5a">Isadora Duncan</label> <br>

                <input type="radio" value="18" id="p5b" name="pergunta5">
                <label for="p5b">Lori Fung</label> <br>

                <input type="radio" value="19" id="p5c" name="pergunta5">
                <label for="p5c">Rosália Medau</label> <br>

                <input type="radio" value="20" id="p5d" name="pergunta5">
                <label for="p5d">Ludmila Savinkova</label> <br>
            </form>
        </section>

        <section class="pergunta6" id="pergunta6">
            <h2>6: Em qual edição olímpica a prova de conjunto (grupos) estreou?</h2>
            <form>
                <input type="radio" value="21" id="p6a" name="pergunta6">
                <label for="p6a">Los Angeles 1984</label> <br>

                <input type="radio" value="22" id="p6b" name="pergunta6">
                <label for="p6b">Atlanta 1996</label> <br>

                <input type="radio" value="23" id="p6c" name="pergunta6">
                <label for="p6c">Atenas 2004</label> <br>

                <input type="radio" value="24" id="p6d" name="pergunta6">
                <label for="p6d">Moscou 1980</label> <br>
            </form>
        </section>

        <section class="pergunta7" id="pergunta7">
            <h2>7: Em competições oficiais, a área (tablado) onde a ginasta se apresenta mede:</h2>
            <form>
                <input type="radio" value="25" id="p7a" name="pergunta7">
                <label for="p7a">13 x 13 m</label> <br>

                <input type="radio" value="26" id="p7b" name="pergunta7">
                <label for="p7b">10 x 10 m</label> <br>

                <input type="radio" value="27" id="p7c" name="pergunta7">
                <label for="p7c">20 x 20 m</label> <br>

                <input type="radio" value="28" id="p7d" name="pergunta7">
                <label for="p7d">18 x 18 m</label> <br>
            </form>
        </section>

        <section class="pergunta8" id="pergunta8">
            <h2>8: . Quem levou a ginástica rítmica para a União Soviética, iniciando seu desenvolvimento como
                prática independente?</h2>
            <form>
                <input type="radio" value="29" id="p8a" name="pergunta8">
                <label for="p8a">Guts Muths</label> <br>

                <input type="radio" value="30" id="p8b" name="pergunta8">
                <label for="p8b">Rudolf Bode</label> <br>

                <input type="radio" value="31" id="p8c" name="pergunta8">
                <label for="p8c">Isadora Duncan</label> <br>

                <input type="radio" value="32" id="p8d" name="pergunta8">
                <label for="p8d">Heinrich Medau</label> <br>
            </form>
            <button onclick="registrarTentativa()">Finalizar Quiz</button>

        </section>
    </main>

    <footer>
    </footer>

</body>

</html>

<Script>

    var idPerguntas = [pergunta1,
        pergunta2,
        pergunta3,
        pergunta4,
        pergunta5,
        pergunta6,
        pergunta7,
        pergunta8];

    var gabarito = {
        pergunta1: "2", //pergunta corresponde e value da alternativa
        pergunta2: "7",
        pergunta3: "11",
        pergunta4: "13",
        pergunta5: "20",
        pergunta6: "22",
        pergunta7: "25",
        pergunta8: "31"
    };

    var sobreQuiz = document.getElementById("sobreQuiz");
    var pergunta1 = document.getElementById("pergunta1");
    var pergunta2 = document.getElementById("pergunta2");
    var pergunta3 = document.getElementById("pergunta3");
    var pergunta4 = document.getElementById("pergunta4");
    var pergunta5 = document.getElementById("pergunta5");
    var pergunta6 = document.getElementById("pergunta6");
    var pergunta7 = document.getElementById("pergunta7");
    var pergunta8 = document.getElementById("pergunta8");

    var contAcerto = 0;
    var fkUsuario = sessionStorage.ID_USUARIO;

    function esconderDivs() {
        // mostrar apenas a div sobreQuiz
        sobreQuiz.style.display = flex;
        pergunta1.style.display = none;
        pergunta2.style.display = flex;
        pergunta3.style.display = flex;
        pergunta4.style.display = flex;
        pergunta5.style.display = flex;
        pergunta6.style.display = flex;
        pergunta7.style.display = flex;
        pergunta8.style.display = flex;

    }

    function IniciarQuiz() {
        //deixar div sobreQuiz none e mostrar a da pergunta1
        sobreQuiz.style.display = none;
        pergunta1.style.display = flex;
    }

    function proximaPergunta() {
        // ocultar a div atual e mostrar a próxima
    }

    function registrarTentativa() {

        for (var i = 1; i <= 8; i++) {
            var nome = "pergunta" + i;
            var selecionada = document.querySelector(`input[name="${nome}"]:checked`);

            if (selecionada) { //se a variavel tiver checada/selecionada
                if (selecionada.value === gabarito[nome]) {
                    contAcerto++;
                }
            }
        }

        fetch("/tentativa/registrarTentativa", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                contAcertoServer: contAcerto,
                fkUsuarioServer: fkUsuario,
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    console.log('Tentativa registrada!')

                } else {
                    throw "Erro ao registrar tentativa!";
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
                return false;
            });
    }

</Script>